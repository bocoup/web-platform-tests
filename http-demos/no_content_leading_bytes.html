<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>No-Content response followed by leading bytes in HTTP response</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
</head>
<body>
<script>
function script(src) {
  var s = document.createElement('script');
  s.setAttribute('src', src);
  document.body.appendChild(s);
  return new Promise(function(resolve, reject) {
      s.onload = resolve;
      s.onerror = reject;
    });
}
promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=0');
      });
}, 'zero leading characters');

promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=1');
      });
}, 'one leading character');

promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=2');
      });
}, 'two leading characters');

promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=3');
      });
}, 'three leading characters');

promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=4');
      });
}, 'four leading characters');

promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=5');
      });
}, 'five leading characters');

promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=0');
      })
    .then(function() {
        return script('leading_bytes.py?count=6');
      });
}, 'six leading characters');
</script>
