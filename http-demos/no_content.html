<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Invalid Content-Length</title>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
</head>
<body>
<script>
function script(src) {
  var s = document.createElement('script');
  s.setAttribute('src', src + '&time=' + new Date().getTime());
  document.body.appendChild(s);
  return new Promise(function(resolve, reject) {
      s.onload = resolve;
      s.onerror = reject;
    });
}
promise_test(function(t) {
  return Promise.resolve()
    .then(function() {
        return script('no_content.py?length=5');
      })
    .then(function() {
        return script('no_content.py?length=0');
      });
}, 'Invalid Content-Length');
</script>
