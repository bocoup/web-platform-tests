<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <meta name="variant" content="">
  <meta name="variant" content="?remove-promise">
  <title>idlharness: Partial namespace</title>
  <script src="/infrastructure/testharness.js/resources/variant-promise.js"></script>
  <script src="/resources/testharness.js"></script>
  <script src="/resources/testharnessreport.js"></script>
  <script src="/resources/WebIDLParser.js"></script>
  <script src="/resources/idlharness.js"></script>
</head>

<body>
  <p>Verify the series of sub-tests that are executed for "partial" namespace objects.</p>
  <script>
    "use strict";

    // No original existence
    (() => {
      const idlArray = new IdlArray();
      idlArray.add_idls('partial namespace A {};');
      idlArray.test();
    })();

    // Valid exposure (Note: Worker -> {Shared,Dedicated,Service}Worker)
    (() => {
      const idlArray = new IdlArray();
      idlArray.add_untested_idls(`
        [Exposed=(Worker)]
        namespace B {};

        [Exposed=(DedicatedWorker, ServiceWorker, SharedWorker)]
        namespace C {};`);
      idlArray.add_idls(`
        [Exposed=(DedicatedWorker, ServiceWorker, SharedWorker)]
        partial namespace B {};

        [Exposed=(Worker)]
        partial namespace C {};`);
      idlArray.collapse_partials();
    })();

    // Invalid exposure
    (() => {
      const idlArray = new IdlArray();
      idlArray.add_untested_idls(`
        [Exposed=(Window, ServiceWorker)]
        namespace D {};`);
      idlArray.add_idls(`
        [Exposed=(DedicatedWorker)]
        partial namespace D {};`);
      idlArray.collapse_partials();
    })();

    // Original is an interface, not a namespace.
    (() => {
      const idlArray = new IdlArray();
      idlArray.add_idls(`
        partial namespace E {};
        interface E {};`);
      idlArray.collapse_partials();
    })();
  </script>
</body>

</html>
